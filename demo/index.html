<!doctype html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8" />
    <style>
      body {
        background: #fafafa;
      }
    </style>
    <script src="../dist/src/media-fx.js" type="module"></script>
    <script>
      const updatePlaylist = async () => {
        const select = document.querySelector('#playlist');
        const ms = document.querySelector('#sequence');
        const response = await fetch(select.value);
        if (response.ok) {
          try {
            const json = await response.json();
            await ms.setPlaylist(json);
          } catch (error) {
            console.error(error);
          }
        } else {
          console.error(response);
        }
      };
      window.onload = async () => {
        const ms = document.querySelector('#sequence');
        ms.addEventListener('error', event =>
          console.error(`${event.message} ${event.error}`),
        );
        updatePlaylist();
      };
    </script>
  </head>
  <body>
    <media-fx
      id="sequence"
      width="640"
      height="360"
      style="background-color: #f00; isolation: isolate"
    >
    </media-fx>
    <p>
      <button onclick="sequence.play()">Play</button>
      <button onclick="sequence.pause()">Pause</button>
    </p>
    <p>
      <select id="playlist" onchange="updatePlaylist()">
        <option value="playlist.json">playlist.json</option>
        <option value="transitions.json">transitions.json</option>
      </select>
    </p>
  </body>
</html>
